<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Webmaker Login Plain JS Test</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link href="https://stuff.webmaker.org/makerstrap/latest/makerstrap.complete.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/webmakerLogin.css">

    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://login.persona.org/include.js"></script>
    <script src="/webmakerLogin.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-webmaker">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" nav-toggle="">
            <span class="sr-only">Toggle navigation</span>
            <span class="fa fa-bars fa-lg"></span>
          </button>
          <a href="#" class="logo webmaker-logo">
            <img src="https://webmaker.org/img/logo.png">
          </a>
        </div>
        <div class="navbar-collapse collapse">
          <form class="navbar-form navbar-right">
            <select style="display: none;" tabindex="-1" class="form-control selectize selectized"><option value="en-us" selected="selected"></option></select><div class="selectize-control form-control selectize single"><div class="selectize-input items has-options full has-items"><div data-value="en-us" class="item">English</div><input style="width: 4px; opacity: 0; position: absolute; left: -10000px;" tabindex="" autocomplete="off" type="text"></div><div style="display: none;" class="selectize-dropdown form-control selectize single"><div class="selectize-dropdown-content"><div data-value="en-us" data-selectable="" class="option selected">English</div><div data-value="fr-ca" data-selectable="" class="option">Fran√ßais</div></div></div></div>
          </form>
          <div class="navbar-form navbar-right test-buttons" logged-out-only="">
            <button wm-join-webmaker wm-password-reset class="navbar-btn btn btn-primary" id="join-webmaker">Join Webmaker</button>
            <button wm-signin class="btn btn-secondary-nav navbar-btn" id="sign-in">Sign in</button>
            <button wm-signin class="btn btn-secondary-nav navbar-btn hidden" id="sign-out">Sign out</button>
          </div>
        </div>
      </div>
    </nav>
    <div class="webmaker">

    </div>
    <script>
      (function() {
        var client = new WebmakerLogin({
          csrfToken: 'wut',
          showCTA: true
        });

        client.on('login', function (user) {
          console.log('login: ', user);
        });
        client.on('logout', function () {
          console.log('logout');
        });
        client.on('verified', function (user) {
          console.log('verified: ', user);
        });

        var joinWebmakerButton = document.querySelector("#join-webmaker");
        var signInButton = document.querySelector("#sign-in");
        var signOutButton = document.querySelector("#sign-out");
        signInButton.addEventListener("click", function() {
          client.login();
        });
        signOutButton.addEventListener("click", function() {
          client.logout();
        });
        joinWebmakerButton.addEventListener("click", function() {
          client.create();
        });

        // Navbar
        var $collapse = $('.navbar-collapse');
        $('.navbar-toggle').on('click', function (e) {
          e.preventDefault();
          if ($collapse.hasClass('collapse')) {
            $collapse.removeClass('collapse');
          } else {
            $collapse.addClass('collapse')
          }
        });
      }());
    </script>
  </body>
</html>
